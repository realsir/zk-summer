<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>SP1 Math Version</title>
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            margin: 0;
            font-family: 'Titillium Web', sans-serif;
            background: url('fon.png') no-repeat center center fixed;
            background-size: cover;
        }

        .centered-plate,
        .game-plate,
        .end-plate {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 440px;
            background: #ffe4ec;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
            border-radius: 16px;
            padding: 36px 30px;
            text-align: center;
        }

        h1, h2 {
            margin: 0 0 20px;
            font-weight: 700;
            color: #c2185b;
        }

        p, .rules {
            font-size: 16px;
            color: #333;
            text-align: left;
        }

        .rules ul {
            padding-left: 20px;
        }

        .btn,
        .restart-btn,
        .start-btn,
        .share-btn {
            background: #ec407a;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 10px 28px;
            cursor: pointer;
            font-size: 17px;
            margin: 8px;
            transition: background 0.2s;
            font-family: 'Titillium Web', sans-serif;
        }

        .btn:hover,
        .restart-btn:hover,
        .start-btn:hover,
        .share-btn:hover {
            background: #d81b60;
        }

        .timer {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.8);
            padding: 6px 16px;
            border-radius: 10px;
            font-weight: 700;
            color: #880e4f;
            font-size: 22px;
        }

        .question-box {
            font-size: 24px;
            margin-top: 40px;
            margin-bottom: 20px;
        }

        .answer-box input {
            padding: 6px 10px;
            font-size: 18px;
            width: 80px;
            border-radius: 6px;
            border: 1px solid #ccc;
            margin-right: 10px;
            font-family: 'Titillium Web', sans-serif;
        }

        .proofs-counter {
            margin-top: 20px;
            font-size: 18px;
            color: #333;
        }

        .button-group {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        @media (max-width: 500px) {
            .centered-plate, .game-plate, .end-plate {
                width: 90vw;
                padding: 20px;
            }

            .timer {
                right: 10px;
            }
        }
    </style>
</head>
<body>

<div id="welcome" class="centered-plate">
    <h1>SP1 Math Version</h1>
    <div class="rules">
        <p><strong>is an innovative model for the manual generation of proofs.</strong></p>
        <p>The problems are quite easy, you have to solve them manually and therefore generate proofs.</p>
        <p>Your time is limited, use it wisely.</p>
        <p><strong>Rules:</strong></p>
        <ul>
            <li>You start with <strong>20 seconds</strong>.</li>
            <li>Each correct proof: <strong>+2 seconds</strong></li>
            <li>Each incorrect proof: <strong>-2 seconds</strong></li>
        </ul>
        <p>If you're ready, click start below.</p>
    </div>
    <button class="start-btn" onclick="startGame()">Start</button>
</div>

<div id="game" class="game-plate" style="display: none;">
    <div class="timer" id="timer">20:000</div>
    <div class="question-box" id="question"></div>
    <div class="answer-box">
        <input type="text" id="answer" onkeydown="if(event.key==='Enter'){submitAnswer();}" />
        <button class="btn" onclick="submitAnswer()">OK</button>
    </div>
    <div class="proofs-counter">
        Proofs Count: <span id="count">0</span>
    </div>
</div>

<div id="end" class="end-plate" style="display: none;">
    <h2>Time's up!</h2>
    <div class="proofs-counter">
        Proofs Count: <span id="final-count">0</span>
    </div>
    <div class="button-group">
        <button class="restart-btn" onclick="showWelcome()">Restart</button>
        <button class="share-btn" onclick="shareResults()">Share Results</button>
    </div>
</div>

<script>
    const rawTasks = [
              "2 + 3 = 5", "5 - 2 = 3", "7 + 1 = 8", "10 - 4 = 6", "3 + 3 = 6", "6 - 5 = 1", "9 + 0 = 9", "8 - 3 = 5",
"4 + 6 = 10", "10 - 10 = 0", "5 + 7 = 12", "12 - 5 = 7", "1 + 2 = 3", "6 + 4 = 10", "11 - 7 = 4", "3 + 5 = 8",
"8 - 2 = 6", "7 - 9 = -2", "9 + 2 = 11", "13 - 6 = 7", "3 - 2 + 1 = 2", "4 + 5 - 3 = 6", "1 + 1 + 1 = 3",
"10 - 3 + 2 = 9", "7 + 2 - 4 = 5", "6 - 1 - 2 = 3", "5 + 4 - 6 = 3", "3 + 2 + 1 = 6", "9 - 5 + 1 = 5",
"8 - 4 - 2 = 2", "2 * 3 = 6", "3 * 4 = 12", "5 * 1 = 5", "6 * 2 = 12", "0 * 9 = 0", "7 * 1 = 7", "4 * 5 = 20",
"8 * 2 = 16", "3 * 3 = 9", "1 * 1 = 1", "9 * 0 = 0", "2 * 2 = 4", "7 * 3 = 21", "6 * 4 = 24", "5 * 5 = 25",
"6 / 2 = 3", "10 / 2 = 5", "8 / 4 = 2", "12 / 3 = 4", "16 / 4 = 4", "9 / 3 = 3", "5 / 5 = 1", "18 / 2 = 9",
"4 / 2 = 2", "20 / 5 = 4", "6 / 3 = 2", "14 / 2 = 7", "15 / 5 = 3", "21 / 3 = 7", "24 / 4 = 6",
"3 + 2 * 2 = 7", "(3 + 2) * 2 = 10", "4 * 2 - 3 = 5", "8 / 2 + 1 = 5", "9 - 3 * 2 = 3", "(9 - 3) * 2 = 12",
"2 + 2 * 3 = 8", "(2 + 2) * 3 = 12", "12 / 3 + 2 = 6", "18 / 3 - 1 = 5", "5 + 5 * 0 = 5", "(5 + 5) * 0 = 0",
"10 - 2 * 4 = 2", "6 * 2 + 1 = 13", "6 * (2 + 1) = 18", "-1 + 2 = 1", "3 - 5 = -2", "-4 + 3 = -1", "0 - 7 = -7",
"-2 + 5 = 3", "-3 + (-2) = -5", "4 + (-1) = 3", "-5 + 5 = 0", "-6 + 2 = -4", "2 - (-3) = 5", "2 * 0 = 0",
"0 + 0 = 0", "1 + 1 - 1 = 1", "3 + 3 + 3 = 9", "9 / 3 + 1 = 4", "4 * 1 + 2 = 6", "6 - 2 - 2 = 2", "4 + 4 - 4 = 4",
"5 * 2 - 5 = 5", "10 - 5 - 5 = 0", "7 + 2 - 3 = 6", "6 / 1 = 6", "6 / 6 = 1", "1 * 0 + 5 = 5", "2 * 2 + 2 = 6",
"1 + 4 = 5", "2 + 6 = 8", "7 - 2 = 5", "9 - 1 = 8", "3 + 4 = 7", "8 - 5 = 3", "10 - 9 = 1", "5 + 5 = 10",
"6 + 6 = 12", "4 - 1 = 3", "1 + 7 = 8", "6 - 6 = 0", "2 + 0 = 2", "0 + 5 = 5", "10 + 0 = 10", "8 + 1 = 9",
"7 + 2 = 9", "3 - 3 = 0", "4 - 2 = 2", "2 - 1 = 1", "3 + 6 = 9", "9 - 6 = 3", "5 - 3 = 2", "6 * 1 = 6",
"2 * 5 = 10", "3 * 5 = 15", "4 * 2 = 8", "7 * 2 = 14", "5 * 3 = 15", "9 * 1 = 9", "8 * 1 = 8", "3 * 1 = 3",
"1 * 2 = 2", "10 * 1 = 10", "2 * 10 = 20", "11 - 3 = 8", "12 - 6 = 6", "4 * 3 = 12", "8 / 1 = 8", "9 / 1 = 9",
"10 / 5 = 2", "18 / 6 = 3", "20 / 4 = 5", "6 / 6 = 1", "12 / 6 = 2", "15 / 3 = 5", "24 / 6 = 4", "30 / 5 = 6",
"32 / 8 = 4", "28 / 7 = 4", "36 / 6 = 6", "(2 + 3) * 1 = 5", "(4 + 2) * 2 = 12", "(5 + 5) / 5 = 2",
"(6 + 3) / 3 = 3", "(8 - 2) * 2 = 12", "(9 - 3) / 3 = 2", "2 * (3 + 1) = 8", "3 * (2 + 2) = 12", "4 + 6 / 2 = 7",
"5 * (2 + 1) = 15", "6 * (3 - 1) = 12", "10 + 2 * 3 = 16", "(10 + 2) * 3 = 36", "2 * 2 * 2 = 8", "3 + 3 * 3 = 12",
"(3 + 3) * 3 = 18", "7 + 1 - 2 = 6", "8 + 2 - 5 = 5", "9 - 2 + 3 = 10", "6 - 3 + 4 = 7", "5 - 2 + 1 = 4",
"7 * 2 - 3 = 11", "8 * 2 + 1 = 17", "9 + 3 * 2 = 15", "(9 + 3) * 2 = 24", "8 - 2 * 3 = 2", "10 - 3 * 3 = 1",
"(10 - 3) * 3 = 21", "4 + 4 + 4 = 12", "5 + 5 + 5 = 15", "10 - 2 - 3 = 5", "1 + 2 + 3 = 6", "6 * 0 = 0",
"9 * 1 + 2 = 11", "8 / 4 + 3 = 5", "2 + 2 - 1 = 3", "7 + 7 - 7 = 7", "8 + 0 * 5 = 8", "0 * 8 + 9 = 9",
"4 + 3 - 7 = 0", "10 - 3 + 4 = 11", "3 + 3 - 3 = 3", "10 * 0 + 1 = 1", "10 * 1 + 1 = 11", "2 * 2 * 0 = 0",
"4 + 7 = 11", "8 + 5 = 13", "13 - 8 = 5", "15 - 7 = 8", "2 + 8 + 4 = 14", "16 - 9 = 7", "7 + 8 = 15", "5 + 9 = 14",
"17 - 3 = 14", "11 - 8 = 3", "6 + 9 = 15", "20 - 8 = 12", "3 + 8 = 11", "21 - 7 = 14", "4 + 9 = 13", "17 - 6 = 11",
"14 - 12 = 2", "12 + 9 = 21", "14 + 7 = 21", "15 - 11 = 4", "18 - 12 = 6", "18 / 3 = 6", "3 * 7 = 21", "8 * 3 = 24",
"9 * 3 = 27", "14 / 2 = 7", "24 / 3 = 8", "20 / 4 = 5", "7 * 4 = 28", "4 * 8 = 32", "25 / 5 = 5", "12 / 4 = 3",
"30 / 6 = 5", "7 * 5 = 35", "5 * 8 = 40", "6 * 5 = 30", "28 / 4 = 7", "6 * 8 = 48", "48 / 6 = 8", "18 / 9 = 2",
"14 / 7 = 2", "8 * 4 = 32", "16 / 2 = 8", "9 * 4 = 36", "3 * 8 = 24", "12 * 2 = 24", "3 * 6 = 18", "15 / 3 = 5",
"21 / 7 = 3", "27 / 3 = 9", "6 + 7 - 2 = 11", "8 + 9 - 5 = 12", "10 + 11 - 9 = 12", "13 + 4 - 8 = 9", "15 - 4 + 2 = 13",
"3 + 3 * 2 = 9", "(5 + 3) * 2 = 16", "2 * 5 + 7 = 17", "4 * 4 - 7 = 9", "16 / 2 + 7 = 15", "12 + 6 / 2 = 15"

    ]; 

    let tasks = [], current = 0, proofsCount = 0;
    let timer = 0;
    let timerId = null;
    let finished = false;

    function startGame() {
        document.getElementById("welcome").style.display = "none";
        document.getElementById("end").style.display = "none";
        document.getElementById("game").style.display = "block";
        
        proofsCount = 0;
        current = 0;
        finished = false;
        timer = 20.0;

        document.getElementById("count").textContent = proofsCount;

        tasks = rawTasks.map(item => {
            const eqIndex = item.lastIndexOf("=");
            return {
                question: item.substring(0, eqIndex + 1) + " ?",
                answer: item.substring(eqIndex + 1).trim()
            };
        });
        shuffle(tasks);
        showQuestion();

        if (timerId) clearInterval(timerId);
        timerId = setInterval(tick, 24);
    }

    function showQuestion() {
        const q = tasks[current];
        document.getElementById("question").textContent = q.question;
        document.getElementById("answer").value = "";
        document.getElementById("answer").focus();
    }

    function submitAnswer() {
        if (finished) return;
        const input = document.getElementById("answer").value.trim();
        const correct = tasks[current].answer;

        if (input === correct) {
            proofsCount++;
            timer += 2;
        } else {
            timer -= 2;
        }

        if (timer <= 0) {
            timer = 0;
            updateTimer();
            endGame();
            return;
        }

        current = (current + 1) % tasks.length;
        document.getElementById("count").textContent = proofsCount;
        showQuestion();
    }

    function tick() {
        if (finished) return;
        timer -= 0.024;
        if (timer <= 0) {
            timer = 0;
            updateTimer();
            endGame();
        } else {
            updateTimer();
        }
    }

    function updateTimer() {
        const sec = Math.floor(timer);
        const ms = Math.floor((timer - sec) * 1000);
        document.getElementById("timer").textContent = `${sec}:${String(ms).padStart(3, '0')}`;
    }

    function endGame() {
        finished = true;
        clearInterval(timerId);
        document.getElementById("game").style.display = "none";
        document.getElementById("end").style.display = "block";
        document.getElementById("final-count").textContent = proofsCount;
    }

    function showWelcome() {
        document.getElementById("game").style.display = "none";
        document.getElementById("end").style.display = "none";
        document.getElementById("welcome").style.display = "block";
    }

    function shareResults() {
        const count = proofsCount;
        const text = `I achieved the result in ${count} proofs in SP1 Math Version, can you beat me?\n\n> https://zk-summer.vercel.app/\n> SP1 (Math Version)`;
        const tweet = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
        window.open(tweet, '_blank');
    }

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }
</script>

</body>
</html>
